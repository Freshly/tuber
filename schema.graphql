type Tuple {
  key: String!
  value: String!
}

type TuberApp {
  cloudSourceRepo: String!
  imageTag: String!
  name: ID!
  paused: Boolean!
  repo: String!
  repoHost: String!
  repoPath: String!
  reviewApp: Boolean!
  reviewAppsConfig: ReviewAppsConfig
  slackChannel: String!
  sourceAppName: String!
  state: State!
  tag: String!
  triggerID: String!
  vars: [Tuple!]!
}

input AppInput {
  name: ID!
  isIstio: Boolean!
  repo: String!
  tag: String!
}

type State {
  Current: [Resource!]!
  Previous: [Resource!]!
}

type Resource {
  encoded: String!
  kind: String!
  name: String!
}

type ReviewAppsConfig {
  enabled: Boolean!
  vars: [Tuple!]!
  skips: [Resource!]!
}

type Query {
  getApp(name: String!): TuberApp
  getApps: [TuberApp!]!
}

type Mutation {
  createApp(input: AppInput): TuberApp
  updateApp(key: ID!, input: AppInput): TuberApp
  removeApp(key: ID!): TuberApp
  destroyApp(key: ID!): TuberApp
}
