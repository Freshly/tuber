directive @goField(
  forceResolver: Boolean
  name: String
) on INPUT_FIELD_DEFINITION | FIELD_DEFINITION

type Tuple {
  key: String!
  value: String!
}

type TuberApp {
  cloudSourceRepo: String!
  imageTag: String!
  name: ID!
  paused: Boolean!
  reviewApp: Boolean!
  reviewAppsConfig: ReviewAppsConfig
  slackChannel: String!
  sourceAppName: String!
  state: State!
  triggerID: String!
  vars: [Tuple!]!
  reviewApps: [TuberApp!] @goField(forceResolver: true)
}

input AppInput {
  name: ID!
  isIstio: Boolean!
  imageTag: String!
}

type State {
  Current: [Resource!]!
  Previous: [Resource!]!
}

type Resource {
  encoded: String!
  kind: String!
  name: String!
}

type ReviewAppsConfig {
  enabled: Boolean!
  vars: [Tuple!]!
  skips: [Resource!]!
}

type Query {
  getApp(name: String!): TuberApp
  getApps: [TuberApp!]!
}

input CreateReviewAppInput {
  name: String!
  branchName: String!
}

type Mutation {
  createApp(input: AppInput): TuberApp
  updateApp(key: ID!, input: AppInput): TuberApp
  removeApp(key: ID!): TuberApp
  destroyApp(key: ID!): TuberApp
  createReviewApp(input: CreateReviewAppInput!): TuberApp
}
